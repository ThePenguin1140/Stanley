<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stanley Champs</title>
    <script src="//d3js.org/d3.v4.min.js"></script>
    <style>

        .nodes circle{
            stroke: #fff;
            stroke-width: 1.5px;
        }

        .links line{
            stroke: #999;
            stroke-opacity: .6;
        }

        .d3-tip {
            line-height: 1;
            font-weight: bold;
            padding: 12px;
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            border-radius: 2px;
        }

        /* Creates a small triangle extender for the tooltip */
        .d3-tip:after {
            box-sizing: border-box;
            display: inline;
            font-size: 10px;
            width: 100%;
            line-height: 1;
            color: rgba(0, 0, 0, 0.8);
            content: "\25BC";
            position: absolute;
            text-align: center;
        }

        /* Style northward tooltips differently */
        .d3-tip.n:after {
            margin: -1px 0 0 0;
            top: 100%;
            left: 0;
        }

    </style>

</head>
<body>
<svg width="2000" height="1000"></svg>
<script>

    var color = d3.scaleOrdinal(d3.schemeCategory10);

    var svg = d3.select("svg"),
            width = +svg.attr('width'),
            height = +svg.attr('height');

    var simulation = d3.forceSimulation()
            .force("link", d3.forceLink().id(function(d) { return d.id; }))
            .force("charge", d3.forceManyBody())
            .force("center", d3.forceCenter(width/2, height/2));

    d3.json("dataset.json", function(error, graph) {
        if (error) throw error;

        var link = svg.append('g')
                .attr('class', 'links')
                .selectAll('line')
                .data(graph.links)
                .enter().append('line')
                .attr('stroke-width', 3);

        var node = svg.append('g')
                .attr('class', 'nodes')
                .selectAll('circle')
                .data(graph.nodes)
                .enter().append('circle')
                .attr('r', function (d) {
                    if(d.group == 1){
                        return 17 * Math.log(1.25 * Math.pow(d.winCount, 0.25)) + 3;
                    }
                    return 3.75 * Math.log(Math.pow(d.winCount, 0.75)) + 4;

                })
                .attr('fill', function (d) {
                    return color(d.group)
                });

        node.append('title')
                .text(function (d) {
                    return d.name;
                });

        simulation
                .nodes(graph.nodes)
                .on("tick", ticked);

        simulation.force("link")
                .links(graph.links);

        function ticked() {
            link
                    .attr("x1", function(d) { return d.source.x; })
                    .attr("y1", function(d) { return d.source.y; })
                    .attr("x2", function(d) { return d.target.x; })
                    .attr("y2", function(d) { return d.target.y; });

            node
                    .attr("cx", function(d) { return d.x; })
                    .attr("cy", function(d) { return d.y; });
        }
    });
</script>

</body>
</html>